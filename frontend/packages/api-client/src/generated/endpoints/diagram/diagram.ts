/**
 * Generated by orval v7.17.2 ðŸº
 * Do not edit manually.
 * Mermaid LLM Chat API
 * OpenAPI spec version: 0.0.0
 */

import { customInstance } from "../../../fetcher"
import type { DiagramRequest, DiagramResponse } from "../../models"

/**
 * Generate a Mermaid diagram from the prompt (non-streaming).
Returns the complete diagram once generation is finished.
 */
export type diagramOperationsGenerateResponse200 = {
  data: DiagramResponse
  status: 200
}

export type diagramOperationsGenerateResponseSuccess = diagramOperationsGenerateResponse200 & {
  headers: Headers
}

export type diagramOperationsGenerateResponse = diagramOperationsGenerateResponseSuccess

export const getDiagramOperationsGenerateUrl = () => {
  return `/api/diagram`
}

export const diagramOperationsGenerate = async (
  diagramRequest: DiagramRequest,
  options?: RequestInit,
): Promise<diagramOperationsGenerateResponse> => {
  return customInstance<diagramOperationsGenerateResponse>(getDiagramOperationsGenerateUrl(), {
    ...options,
    method: "POST",
    headers: { "Content-Type": "application/json", ...options?.headers },
    body: JSON.stringify(diagramRequest),
  })
}

/**
 * Generate a Mermaid diagram with SSE streaming.
Returns a stream of events: meta, chunk, done, or error.

Event types:
- `meta`: Initial metadata (trace_id, model, diagram_type, language)
- `chunk`: Partial mermaid code updates
- `done`: Final result with complete mermaid code and metadata
- `error`: Error event with structured error information
 */
export type diagramOperationsStreamResponse200 = {
  data: string
  status: 200
}

export type diagramOperationsStreamResponseSuccess = diagramOperationsStreamResponse200 & {
  headers: Headers
}

export type diagramOperationsStreamResponse = diagramOperationsStreamResponseSuccess

export const getDiagramOperationsStreamUrl = () => {
  return `/api/diagram/stream`
}

export const diagramOperationsStream = async (
  diagramRequest: DiagramRequest,
  options?: RequestInit,
): Promise<diagramOperationsStreamResponse> => {
  return customInstance<diagramOperationsStreamResponse>(getDiagramOperationsStreamUrl(), {
    ...options,
    method: "POST",
    headers: { "Content-Type": "application/json", ...options?.headers },
    body: JSON.stringify(diagramRequest),
  })
}
